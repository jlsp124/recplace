<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin - Recplace Professional Centre</title>
    <meta name="description" content="Moderator-only page for adding updates (downloads updated JSON)." />
    <link rel="stylesheet" href="css/site.css" />
  </head>
  <body>
    <header id="site-header"></header>

    <main>
      <section class="section">
        <div class="container">
          <div class="card" data-gate="admin">
            <div class="card-body">
              <h1 class="section-title" style="margin: 0 0 10px">Admin</h1>
              <p class="section-subtitle" style="margin: 0 0 14px">Enter your access code to continue.</p>
              <form class="form">
                <div>
                  <label class="sr-only" for="admin-password">Access code</label>
                  <input id="admin-password" type="password" autocomplete="current-password" required />
                </div>
                <button class="btn btn--primary btn-block" type="submit">Continue</button>
                <div class="error" data-gate-error hidden></div>
              </form>
            </div>
          </div>

          <div data-gated="admin" hidden>
            <div class="card">
              <div class="card-body" style="display: flex; justify-content: space-between; gap: 12px; flex-wrap: wrap">
                <div>
                  <h1 class="section-title" style="margin: 0 0 8px">Update Moderator</h1>
                  <p class="section-subtitle" style="margin: 0">
                    Adds a post and downloads a new <span class="mono">updates.json</span>.
                  </p>
                </div>
                <button class="btn btn--danger" type="button" data-gate-lock>Lock</button>
              </div>
            </div>

            <div class="divider"></div>

            <div class="two-col">
              <div>
                <div class="card">
                  <div class="card-body">
                    <h2 class="section-title" style="margin: 0 0 10px">Add update</h2>
                    <form id="admin-form" class="form">
                      <div>
                        <label for="u-title">Title</label>
                        <input id="u-title" required />
                      </div>
                      <div>
                        <label for="u-date">Date</label>
                        <input id="u-date" type="date" required />
                      </div>
                      <div>
                        <label for="u-category">Category</label>
                        <select id="u-category">
                          <option>Construction</option>
                          <option>Leasing</option>
                          <option>Notices</option>
                          <option>Media</option>
                        </select>
                      </div>
                      <div>
                        <label for="u-body">Body</label>
                        <textarea id="u-body" required></textarea>
                      </div>
                      <div>
                        <label for="u-image">Optional image path</label>
                        <input id="u-image" placeholder="Assets/updates/your-image.jpg" />
                        <div class="form-help">Put images in <span class="mono">Assets/updates/</span>.</div>
                        <div style="height: 10px"></div>
                        <label for="u-image-file">Or pick an image (fills the path)</label>
                        <input id="u-image-file" type="file" accept="image/*" />
                        <div style="height: 10px"></div>
                        <img
                          id="u-image-preview"
                          alt=""
                          hidden
                          style="border-radius: 14px; border: 1px solid rgba(15, 23, 42, 0.14)"
                        />
                      </div>
                      <div class="error" id="admin-error" hidden></div>
                      <button class="btn btn--primary btn-block" type="submit">Generate</button>
                    </form>
                  </div>
                </div>
              </div>

              <div class="sticky-card">
                <div class="card">
                  <div class="card-body">
                    <h2 class="section-title" style="margin: 0 0 10px">Output</h2>
                    <p class="section-subtitle" style="margin: 0 0 12px">
                      Replace <span class="mono">data/updates.json</span> with the downloaded file.
                    </p>
                    <button class="btn btn--primary btn-block" id="admin-download" type="button" disabled>
                      Download updates.json
                    </button>
                    <div class="divider" style="margin: 14px 0"></div>
                    <pre
                      class="mono"
                      id="admin-preview"
                      style="
                        white-space: pre-wrap;
                        margin: 0;
                        color: rgba(15, 23, 42, 0.78);
                        font-size: 12px;
                        max-height: 420px;
                        overflow: auto;
                      "
                    ></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer id="site-footer"></footer>
    <div id="site-cta"></div>

    <script src="js/site.js" defer></script>
    <script src="js/admin.js" defer></script>
  </body>
</html>

